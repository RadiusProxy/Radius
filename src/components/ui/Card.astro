---
import { Image } from "astro:assets";
import type { ImageMetadata } from "astro";
const images = import.meta.glob<{ default: ImageMetadata }>(
    "/src/assets/images/**/*.{jpeg,jpg,png,gif,webp}"
);

interface Props {
    link?: string;
    imageSrc: string;
    text: string;
    id: string;
    size?: "sm" | "lg";
}

const { imageSrc, text, id, link, size = "lg" } = Astro.props;
const sizeClass = size === "sm" ? "h-20 w-20" : "h-36 w-36";
const overlayPaddingClass = size === "sm" ? "p-2" : "p-2 px-4";
const textClass = size === "sm" ? "text-xs" : "";
---
{link ?
    <a class="p-2" href={link}>
        <div id={id} class={`rounded-md relative group cursor-pointer ${sizeClass} hover:scale-105 duration-100 transition-all`}>
            <Image loading="lazy" src={images[imageSrc]()} class={`aspect-square object-cover rounded-md ${sizeClass}`} alt={text} />
            <div class={`absolute inset-0 h-full w-full opacity-0 group-hover:opacity-100 bg-gradient-to-t from-(--accent) to-transparent rounded-b-md duration-100 flex items-end ${overlayPaddingClass} font-semibold`}>
                <p class={textClass}> { text } </p>
            </div>
        </div>
    </a>
    :
    <div class="p-2">
        <div id={id} class={`rounded-md relative group cursor-pointer ${sizeClass} hover:scale-105 duration-100 transition-all`}>
            <Image loading="lazy" src={images[imageSrc]()} class={`aspect-square object-cover rounded-md ${sizeClass}`} alt={text} />
            <div class={`absolute inset-0 h-full w-full opacity-0 group-hover:opacity-100 bg-gradient-to-t from-(--accent) to-transparent rounded-b-md duration-100 flex items-end ${overlayPaddingClass} font-semibold`}>
                <p class={textClass}> { text } </p>
            </div>
        </div>
    </div>
}
